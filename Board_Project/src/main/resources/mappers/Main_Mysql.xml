<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gyu.portfolio.service.mapper.MainMapper">
	
	<resultMap id="mainVO" type="mainVO">
		<result property="mainSeq"		column="MAIN_SEQ"	/>
		<result property="mainSe"		column="MAIN_SE" 	/>
		<result property="topBnNm"		column="TOP_BN_NM" 	/>
		<result property="botmBnNm"		column="BOTM_BN_NM" />
		<result property="techNm"		column="TECH_NM" 	/>
		<result property="poforNm"		column="POFOR_NM" 	/>
		<result property="expln"		column="EXPLN" 	  	/>
		
		<result property="regNo"		column="REG_NO" 	/>
		<result property="regDt"		column="REG_DT" 	/>
		<result property="updNo"		column="UPD_NO" 	/>
		<result property="updDt"		column="UPD_DT" 	/>
		<result property="stat"			column="STAT" 		/>
	</resultMap>
	
	<update id="addMain">
		INSERT INTO TB_MAIN(
			MAIN_SEQ
			, MAIN_SE
			, TOP_BN_NM
			, BOTM_BN_NM
			, TECH_NM
			, POFOR_NM
			, EXPLN
			, REG_NO
			, REG_DT
			, UPD_NO
			, UPD_DT
			, STAT
		)VALUES (
			#{mainSeq}
			, #{mainSe}
			, #{topBnNm}
			, #{botmBnNm}
			, #{techNm}
			, #{poforNm}
			, #{expln}
			, #{regNo}
			, NOW()
			, #{regNo}
			, NOW()
			, 1
		) ON DUPLICATE KEY UPDATE 
			TOP_BN_NM    = #{topBnNm}
			, BOTM_BN_NM = #{botmBnNm}
			, TECH_NM    = #{techNm}
			, POFOR_NM   = #{poforNm}
			, EXPLN      = #{expln}
			, UPD_NO     = #{regNo}
			, UPD_DT 	 = NOW()
		
	</update>
	
	<select id="getMainList" resultMap="mainVO">
		SELECT
			MAIN_SEQ
			, MAIN_SE
			, TOP_BN_NM
			, BOTM_BN_NM
			, TECH_NM
			, POFOR_NM
			, EXPLN
			, REG_NO
			, REG_DT
			, UPD_NO
			, UPD_DT
			, STAT
		FROM TB_MAIN
		WHERE 1=1
			AND MAIN_SEQ = #{mainSeq}
			AND MAIN_SE = #{mainSe}
	</select>
	
	<select id="getMain" resultMap="mainVO">
		SELECT
			MAIN_SEQ
			, MAIN_SE
			, TOP_BN_NM
			, BOTM_BN_NM
			, TECH_NM
			, POFOR_NM
			, EXPLN
			, REG_NO
			, REG_DT
			, UPD_NO
			, UPD_DT
			, STAT
		FROM TB_MAIN
		WHERE 1=1
<!-- 			AND MAIN_SEQ = #{mainSeq} -->
			AND MAIN_SE = #{mainSe}
	</select>
	
</mapper>